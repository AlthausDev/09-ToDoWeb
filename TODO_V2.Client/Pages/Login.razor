@page "/login" 

@inject HttpClient Http
@inject NavigationManager NavManager
@inject ILocalStorageService storageService
@inject IJSRuntime JS

<PageTitle>TODO APP</PageTitle>

<Modal @ref="ModalInstance" Size="ModalSize.Regular" ShowCloseButton="false" UseStaticBackdrop="true" IsVerticallyCentered="true"/>
<Toasts class="p-3" Messages="messages" AutoHide="true" Delay="6000" StackLength="5" Placement="ToastsPlacement.TopRight" />

<div class="main-box" style="background: rgba(0,0,0,.5);">
    <h2>LOGIN</h2>
    <form>
        <div class="core-box">
            <input autofocus type="text" name="" required="true" @bind="UserName" @bind:event="oninput" autocomplete="current-password">
            <label>Username</label>
        </div>
        <div class="core-box">
            <input type="password" name="" required="true" @bind="Password" @bind:event="oninput" autocomplete="current-password">
            <label>Contraseña</label>
        </div>
        <button type="button" class="button-style" @onclick="OnClickRegister">
            Registrarse
        </button>
        <button type="button" id="loginButton" class="button-style" @onclick="OnClickLogin">
            Login
        </button>        
    </form>
</div>
<script>    
    let enterEventListener = null;

    window.addEnterEventListener = function (buttonId, isRegistering) {
        if (!isRegistering) {
            if (enterEventListener === null) {
                enterEventListener = function (event) {
                    if (event.key === "Enter") {
                        document.getElementById(buttonId).click();
                    }
                };
                document.addEventListener("keydown", enterEventListener);
            }
        } else {
            if (enterEventListener !== null) {
                document.removeEventListener("keydown", enterEventListener);
                enterEventListener = null;
            }
        }
    };
</script>

<style>

</style>

